<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <title>Sulifa Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>

<h2>üéÆ –û–π—ã–Ω—à—ã –±–µ—Ç—ñ</h2>

<div id="status">–ñ“Ø–∫—Ç–µ–ª—É–¥–µ...</div>

<script>
const SERVER = "https://sulifaonlinerender.onrender.com";

// ‚ùó –£–∞“õ—ã—Ç—à–∞ —Ç–µ—Å—Ç —Ä–µ–∂–∏–º—ñ (Telegram –∂–æ“õ –∫–µ–∑–¥–µ)
let tgId = localStorage.getItem("tgId");
if (!tgId) {
  tgId = "test_" + Math.floor(Math.random() * 1000000);
  localStorage.setItem("tgId", tgId);
}

// Telegram “õ–æ—Å—ã–ª“ì–∞–Ω–¥–∞ –æ—Å—ã–ª–∞–π –±–æ–ª–∞–¥—ã:
// const tgId = Telegram.WebApp.initDataUnsafe.user.id;

fetch(`${SERVER}/player`, {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ tgId })
})
.then(res => res.json())
.then(data => {
  document.getElementById("status").innerText =
    `ID: ${data.tgId}\n–ë–∞–ª–∞–Ω—Å: ${data.balance}`;
})
.catch(() => {
  document.getElementById("status").innerText =
    "–°–µ—Ä–≤–µ—Ä–≥–µ “õ–æ—Å—ã–ª–∞ –∞–ª–º–∞–¥—ã";
});
</script>

</body>
</html>
