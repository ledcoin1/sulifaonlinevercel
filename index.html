<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Сулифа – Ойыншы</title>
<style>
  body { margin: 0; font-family: Arial; height: 100vh; display: flex; align-items: center; justify-content: center; background-color: black; color: white; }
  #balance { font-size: 24px; }
</style>
</head>
<body>
<div>
  <div>Баланс: <span id="balance">0</span></div>
</div>

<script>
const backendURL = "https://sulifaonlinerender.onrender.com";
const telegramId = prompt("Сіздің Telegram ID енгізіңіз") || "test_player";

// Ойыншыны серверге қосу (егер жоқ болса, автоматты түрде жасау)
async function initPlayer() {
  try {
    // Алдымен ойыншыны тексеру
    const res = await fetch(`${backendURL}/api/player/${telegramId}`);
    let data;
    if (res.status === 404) {
      // Жаңа ойыншы жасау
      const createRes = await fetch(`${backendURL}/api/player/create`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ telegramId })
      });
      data = await createRes.json();
    } else {
      data = await res.json();
    }

    document.getElementById("balance").innerText = data.balance;
  } catch (err) {
    console.error(err);
  }
}

initPlayer();
</script>
</body>
</html>
