<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8">
  <title>ğŸ® Sulifa Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body class="bg-gray-100 text-gray-800">

<div class="container mx-auto p-6">
  <h1 class="text-3xl font-bold mb-6">ğŸ® Sulifa Player</h1>

  <div class="bg-white p-4 rounded shadow mb-4">
    <p class="text-lg">TG ID: <span id="tgId"></span></p>
    <p class="text-lg">Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: <span id="balance">0</span></p>
  </div>
</div>

<script>
const SERVER = "https://sulifaonlinerender.onrender.com";
const playerId = "test_358418"; // Ğ½Ğ°Ò›Ñ‚Ñ‹ Ğ¾Ğ¹Ñ‹Ğ½ÑˆÑ‹ tgId

document.getElementById("tgId").innerText = playerId;

// Socket.io Ò›Ğ¾ÑÑƒ
const socket = io(SERVER);

// Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ UI Ğ¶Ğ°Ò£Ğ°Ñ€Ñ‚Ñƒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑÑÑ‹
function updateBalanceUI(balance) {
  document.getElementById("balance").innerText = balance;
}

// Ğ¡ĞµÑ€Ğ²ĞµÑ€Ğ³Ğµ Ñ‚Ñ–Ñ€ĞºĞµĞ»Ñƒ
fetch(`${SERVER}/player`, {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ tgId: playerId })
})
.then(r => r.json())
.then(data => updateBalanceUI(data.balance));

// Live update Ñ‚Ñ‹Ò£Ğ´Ğ°Ñƒ
socket.on("balanceUpdated", data => {
  if (data.tgId === playerId) {
    updateBalanceUI(data.balance);
  }
});
</script>

</body>
</html>
